(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"61Lz":function(e,t,a){"use strict";a("5NDa");var n=a("5rEg"),r=a("htGi"),i=a.n(r),l=a("/HRN"),o=a.n(l),c=a("WaGi"),s=a.n(c),u=a("ZDA2"),p=a.n(u),d=a("/+P4"),m=a.n(d),h=a("N9n2"),f=a.n(h),g=a("xHqa"),E=a.n(g),y=a("q1tI"),v=a.n(y),b=function(e){function t(){return o()(this,t),p()(this,m()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=this;return v.a.createElement(n.a.TextArea,i()({},this.props,{onBlur:function(t){t.target.value=(t.target.value||"").trim(),e.props.onChange(t),e.props.onBlur(t)}}))}}]),t}(y.PureComponent);E()(b,"defaultProps",{onChange:function(){},onBlur:function(){}});var k=function(e){function t(){return o()(this,t),p()(this,m()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=this;return v.a.createElement(n.a,i()({},this.props,{onBlur:function(t){t.target.value=(t.target.value||"").trim(),e.props.onChange(t),e.props.onBlur(t)}}))}}]),t}(y.PureComponent);E()(k,"defaultProps",{onChange:function(){},onBlur:function(){}}),k.TextArea=b,t.a=k},Kmlf:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,i=a("bx4M"),l=(a("+L6B"),a("2/Rp")),o=a("/HRN"),c=a.n(o),s=a("WaGi"),u=a.n(s),p=a("ZDA2"),d=a.n(p),m=a("/+P4"),h=a.n(m),f=a("N9n2"),g=a.n(f),E=a("q1tI"),y=a.n(E),v=a("MuoO"),b=a("7DNP"),k=(a("2qtc"),a("kLXV")),w=(a("bP8k"),a("gFTJ")),C=(a("g9YV"),a("wCAj")),P=(a("DZo9"),a("8z0m")),S=(a("MXD1"),a("CFYs")),x=(a("5Dmo"),a("3S7+")),R=(a("Pwec"),a("CtXQ")),L=(a("7Kak"),a("9yH6")),q=a("htGi"),T=a.n(q),U=a("TbGu"),H=a.n(U),I=(a("miYZ"),a("tsqr")),D=a("K47E"),F=a.n(D),O=a("xHqa"),B=a.n(O),N=(a("OaEy"),a("2fM7")),A=(a("y8nQ"),a("Vl3Y")),M=a("Mlzr"),j=a("61Lz"),Y=a("f/1Y"),z=a("NTd/"),G=a.n(z),K=(a("t7F9"),A.a.Item),V=N.a.Option,W=j.a.TextArea,X=function(e){return G.a.formatMessage(e)},Z=Object(v.connect)(function(e){var t=e.taskPredict;return{lists:t.lists,selection:t.selection,banth:t.banth,remote:t.remote,username:e.user.currentUser.username,loading:e.loading.effects["taskPredict/queryTaskList"]}})(n=A.a.create()(n=Object(Y.a)()(n=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=d()(this,(e=h()(t)).call.apply(e,[this].concat(r))),B()(F()(a),"state",{visible:!1,type:"N",fileList:[],tagLists:[],percent:0,showHelpB:!1,showHelpR:!1,time:"00:00",startTime:0,fileLists:[],isShowFile:!1,isUpload:!1,downloadUrl:""}),B()(F()(a),"onOkCreateTask",function(e){e&&e.preventDefault();var t=a.props,n=t.dispatch,r=t.username;(0,t.form.validateFields)(function(e,t){if(!e){var i={username:r},l=I.a.loading(X({id:"total.searching"}),0),o="taskPredict/".concat("N"===t.choose?"banth":"remote","Predict"),c=[];if("N"===t.choose&&!(c=t.captcha.split(",").filter(function(e){return""!==e}).map(String)).length)return void l();"N"===t.choose?(i.model=t.encryptionAlgorithm,i.uid=c):(i.modelToken=t.encryptionAlgorithm,i.path=t.path,a.setState({percent:70,startTime:(new Date).getTime()})),n({type:o,payload:i}).then(function(e){if(l(),"Y"===t.choose)if(e){var n=(new Date).getTime()-a.state.startTime,r=(n-n%1e3)/1e3,i=r%60,o=(r-i)/60;a.setState({time:"".concat(o||"00",":").concat(i||"00")}),a.setState({percent:100})}else a.setState({percent:0})}).catch(function(e){a.setState({percent:0}),l()})}})}),B()(F()(a),"closeHelpBatch",function(){a.setState({showHelpB:!1})}),B()(F()(a),"showHelpBatch",function(){a.setState({showHelpB:!0})}),B()(F()(a),"closeHelpRemote",function(){a.setState({showHelpR:!1})}),B()(F()(a),"showHelpRemote",function(){a.setState({showHelpR:!0})}),B()(F()(a),"queryTaskList",function(){var e=a.props;(0,e.dispatch)({type:"taskPredict/queryTaskList",payload:{username:e.username,category:"inference"}})}),B()(F()(a),"querySelections",function(){var e=a.props;(0,e.dispatch)({type:"taskPredict/querySelectionsPredict",payload:{username:e.username}})}),B()(F()(a),"handleRadioChange",function(e){var t=a.props.dispatch;a.setState({type:e.target.value,percent:0}),t({type:"taskPredict/queryBanth",payload:{banth:[]}}),t({type:"taskPredict/queryRemote",payload:{remote:{}}})}),B()(F()(a),"handleCaptcha",function(e){a.props.form;a.setState({tagLists:e.target.value.split(",")})}),B()(F()(a),"beforeUpload",function(e){if(e.size>104857600)return a.setState({fileLists:[]}),I.a.error("请上传小于100M的文件！",3),!1}),B()(F()(a),"handleFileChange",function(e){var t=e.fileList.slice(-1);if(a.setState({fileLists:H()(t)}),"done"===t[0].status){var n=t[0],r=n.response,i=n.type;a.setState({isShowFile:!1,isUpload:!0,downloadUrl:URL.createObjectURL(new Blob([r],{type:i}))||""}),I.a.success(X({id:"total.uploadSuccess"}))}else"error"===t[0].status?(a.setState({fileLists:[],isShowFile:!1,isUpload:!1}),I.a.error(X({id:"total.uploadError"}))):a.setState({isShowFile:!0,isUpload:!1})}),B()(F()(a),"handleDownload",function(){var e=a.state.downloadUrl,t=document.createElement("a");t.href=e,t.download="predict.txt",t.click()}),a}return g()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.querySelections(),this.queryTaskList()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"taskPredict/queryBanth",payload:{banth:[]}}),e({type:"taskPredict/queryRemote",payload:{remote:{}}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,n=t.percent,r=t.showHelpB,o=t.showHelpR,c=t.time,s=t.isShowFile,u=t.fileLists,p=t.downloadUrl,d=this.props,m=d.form,h=d.selection,f=d.banth,g=d.remote,v=d.username,b=m.getFieldDecorator,q=m.getFieldValue,U=h.models,H=q("encryptionAlgorithm"),I={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},style:{textAlign:"left"}},D={wrapperCol:{xs:{span:24},sm:{span:12,offset:6}}};return y.a.createElement(E.Fragment,null,y.a.createElement(A.a,{className:"task-predict"},y.a.createElement(K,T()({label:X({id:"predict.modal"})},I,{extra:!q("encryptionAlgorithm")&&X({id:"predict.noModelWarning"})||""}),b("encryptionAlgorithm",{rules:[{required:!0,message:X({id:"train.modalnull"})}],initialValue:Object(M.a)("token")&&Object(M.a)("token")||void 0})(y.a.createElement(N.a,{showSearch:!0,optionFilterProp:"children",placeholder:X({id:"predict.modal"}),disabled:Object(M.a)("token"),filterOption:function(e,t){return"".concat(t.props.children).toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(){e.setState({downloadUrl:""})}},U.map(function(e,t){return y.a.createElement(V,{key:t,value:e},e)})))),H&&y.a.createElement(E.Fragment,null,y.a.createElement(K,T()({label:X({id:"launch.operate"})},I),b("choose",{rules:[{required:!1}],initialValue:a})(y.a.createElement(L.a.Group,{onChange:this.handleRadioChange},y.a.createElement(L.a,{value:"N"},X({id:"predict.manualforecast"})),y.a.createElement(x.a,{title:X({id:"predict.helpBatchTitle"})},y.a.createElement(R.a,{className:"tooltip",type:"question-circle",onClick:function(){return e.showHelpBatch()}})),y.a.createElement(L.a,{value:"Y"},X({id:"predict.remoteInference"})),y.a.createElement(x.a,{title:X({id:"predict.helpRemoteTitle"})},y.a.createElement(R.a,{className:"tooltip",type:"question-circle",onClick:function(){return e.showHelpRemote()}})),y.a.createElement(L.a,{value:"U"},X({id:"predict.bulkUpload"}))))),"N"===a&&y.a.createElement(E.Fragment,null,y.a.createElement(K,T()({label:X({id:"predict.uid"}),extra:X({id:"predict.uidtip"})},I),b("captcha",{rules:[{required:!0,message:"Please input the captcha you got!"}]})(y.a.createElement(j.a,{placeholder:"uid"}))),y.a.createElement(K,D,y.a.createElement(l.a,{type:"primary",style:{marginRight:15},onClick:this.onOkCreateTask},X({id:"total.reasoning"})))),"Y"===a&&y.a.createElement(E.Fragment,null,y.a.createElement(K,T()({label:X({id:"predict.uidmul"}),extra:X({id:"predict.uidmultip"})},I),b("path",{rules:[{required:!0,message:"Please input the filePath you got!"}]})(y.a.createElement(j.a,{placeholder:X({id:"predict.uidmul"})}))),y.a.createElement(K,D,y.a.createElement(l.a,{type:"primary",style:{marginRight:15},onClick:this.onOkCreateTask},X({id:"total.reasoning"}))),y.a.createElement(K,T()({label:X({id:"predict.percent"})},I),y.a.createElement(S.a,{percent:n})),y.a.createElement(K,D,y.a.createElement(W,{disabled:!0,autoSize:{minRows:5},value:g.path&&g.path||""})),y.a.createElement(K,D,y.a.createElement("span",null,"".concat(X({id:"predict.time"}),":").concat(c)))),"U"===a&&y.a.createElement(E.Fragment,null,y.a.createElement(K,D,y.a.createElement(P.a,{action:"".concat(location.origin,"/api/inference/download"),data:{model:H,username:v},name:"file",showUploadList:s,beforeUpload:this.beforeUpload,onChange:this.handleFileChange,fileList:u,headers:{"Access-Token":sessionStorage.getItem("token")}},y.a.createElement(l.a,{icon:"upload"},X({id:"predict.uidbtn"}))),p&&y.a.createElement(l.a,{type:"primary",style:{marginLeft:15},onClick:this.handleDownload},X({id:"total.download"}))))),0!==f.length&&y.a.createElement(K,T()({label:X({id:"predict.predictResult"})},I,{extra:X({id:"predict.twenty"})}),y.a.createElement(C.a,{rowKey:function(e,t){return t},dataSource:f,columns:[{title:"UID",dataIndex:"uid"},{title:"SCORE",dataIndex:"score"}],pagination:!1}))),y.a.createElement(k.a,{visible:r,maskClosable:!1,footer:null,title:X({id:"predict.manualForecaseSamples"}),onCancel:this.closeHelpBatch,width:600},y.a.createElement(i.a,{hoverable:!0},y.a.createElement(w.a,{bordered:!0,column:2},y.a.createElement(w.a.Item,{label:"接口名",span:2},"手动输入推理接口"),y.a.createElement(w.a.Item,{label:"调用方式",span:2},"POST方法"),y.a.createElement(w.a.Item,{label:"接口地址",span:2},"http://federated-learning.jdfmgt.com/api/inference/batch"),y.a.createElement(w.a.Item,{label:"content/type",span:2},"application/json"),y.a.createElement(w.a.Item,{label:"参数",span:2},'{"uid":[11,12,13],"model":"LinearRegression"}'),y.a.createElement(w.a.Item,{label:"返回",span:2},'{"code": 0,"data": {"predict":[{"uid": 11, "score": 10.263121046652351},{"uid": 11, "score": 10.263121046652351}]},"status": "success"}')))),y.a.createElement(k.a,{title:X({id:"predict.remoteInferenceSamples"}),visible:o,maskClosable:!1,footer:null,onCancel:this.closeHelpRemote,width:600},y.a.createElement(i.a,{hoverable:!0},y.a.createElement(w.a,{bordered:!0,column:2},y.a.createElement(w.a.Item,{label:"UID文件路径",span:2},"/export/Data/federated-learning-client/predict/uid.txt"),y.a.createElement(w.a.Item,{label:"预测结果路径",span:2},"/export/Data/federated-learning-client/predict/predict.txt"),y.a.createElement(w.a.Item,{label:"UID文件格式说明",span:2},"按照列方式保存，每行都是一个UID,示例如下:",y.a.createElement("br",null),"1",y.a.createElement("br",null),"10",y.a.createElement("br",null),"12",y.a.createElement("br",null),"15"),y.a.createElement(w.a.Item,{label:"预测结果格式说明",span:2},"uid,score:",y.a.createElement("br",null),"1,2960.008867071219",y.a.createElement("br",null),"10,2632.500804975137",y.a.createElement("br",null),"12,2660.5364728846753",y.a.createElement("br",null),"15,2632.500804975137")))))}}]),t}(E.PureComponent))||n)||n)||n;a.d(t,"default",function(){return J});var J=Object(v.connect)(function(e){return{TaskPredict:e.TaskPredict}})(r=function(e){function t(){return c()(this,t),d()(this,h()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.dispatch;return y.a.createElement(i.a,{title:G.a.formatMessage({id:"predict.create"}),extra:y.a.createElement(l.a,{type:"primary",onClick:function(){e(b.routerRedux.push("/task/predict/list"))}},G.a.formatMessage({id:"launch.goback"}))},y.a.createElement(Z,null))}}]),t}(E.PureComponent))||r},Mlzr:function(e,t,a){"use strict";function n(e){var t=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)"),a=window.location.href.match(t);return null!=a?a[2]:null}a.d(t,"a",function(){return n})},"f/1Y":function(e,t,a){"use strict";a.d(t,"a",function(){return B});var n=a("hfKm"),r=a.n(n),i=a("2Eek"),l=a.n(i),o=a("XoMD"),c=a.n(o),s=a("Jo+v"),u=a.n(s),p=a("4mXO"),d=a.n(p),m=a("pLtp"),h=a.n(m),f=a("htGi"),g=a.n(f),E=a("/HRN"),y=a.n(E),v=a("WaGi"),b=a.n(v),k=a("ZDA2"),w=a.n(k),C=a("/+P4"),P=a.n(C),S=a("K47E"),x=a.n(S),R=a("N9n2"),L=a.n(R),q=a("xHqa"),T=a.n(q),U=a("q1tI"),H=a.n(U);function I(e,t){var a=h()(e);if(d.a){var n=d()(e);t&&(n=n.filter(function(t){return u()(e,t).enumerable})),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach(function(t){T()(e,t,a[t])}):c.a?l()(e,c()(a)):I(a).forEach(function(t){r()(e,t,u()(a,t))})}return e}var F={options:{status:"normal",percent:0}},O=function(e){function t(e){var a;return y()(this,t),a=w()(this,P()(t).call(this,e)),T()(x()(a),"changeProgressOptions",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.setState(function(t){return{options:D({},t.options,{},e)}})}),a.state={options:D({},F.options,{},e.options)},a}return L()(t,e),b()(t,[{key:"render",value:function(){return this.props.children({changeProgress:this.changeProgressOptions,progress:this.state.options})}}]),t}(U.PureComponent);T()(O,"defaultProps",F);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return function(a){function n(){return y()(this,n),w()(this,P()(n).apply(this,arguments))}return L()(n,a),b()(n,[{key:"render",value:function(){var a=this;return H.a.createElement(O,{options:e},function(e){var n=e.progress,r=e.changeProgress;return H.a.createElement(t,g()({},a.props,{progress:n,changeProgress:r}))})}}]),n}(U.PureComponent)}}},t33a:function(e,t,a){e.exports=a("cHUP")(10)}}]);